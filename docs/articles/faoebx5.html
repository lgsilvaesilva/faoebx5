<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>faoebx5 overview • faoebx5</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="faoebx5 overview">
<meta property="og:description" content="">
<meta property="og:image" content="http://lgsilvaesilva.github.io/faoebx5/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">faoebx5</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/faoebx5.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>faoebx5 overview</h1>
            
            <h4 class="date">2019-04-29</h4>
      
      
      <div class="hidden name"><code>faoebx5.Rmd</code></div>

    </div>

    
    
<p>The first time you use the <code>faoebx5</code> package you must set your EBX credentials. In this step your credetials will be sotred in the safe way, for this we have used the <a href="https://CRAN.R-project.org/package=keyring"><code>keyring</code></a> R package. If you would not store your credentials, you should use the function <code><a href="../reference/RemoveEBXCredentials.html">RemoveEBXCredentials()</a></code>. In this overview, we show just the functions related to code lists, once the functions about groups work similarly.</p>
<p>Once you have typed your password twice after run <code><a href="../reference/SetEBXCredentials.html">SetEBXCredentials()</a></code> function, you do not need to rerun this function, because your credential will be kept.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">'faoebx5'</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">'dplyr'</span>)
<span class="kw"><a href="../reference/SetEBXCredentials.html">SetEBXCredentials</a></span>()</code></pre></div>
<div id="getebxcodelists" class="section level2">
<h2 class="hasAnchor">
<a href="#getebxcodelists" class="anchor"></a>GetEBXCodeLists()</h2>
<p>This function aimed to get the list of code list available in the EBX5. It has two arguments: <code>branch</code> and <code>instance</code> that default values are set as <span class="badge badge-danger">“Fishery”</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ebx_cl &lt;-<span class="st"> </span><span class="kw"><a href="../reference/GetEBXCodeLists.html">GetEBXCodeLists</a></span>()
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ebx_cl)
<span class="co">#&gt;    Identifier                      Acronym    Folder         Name  Branch Instance</span>
<span class="co">#&gt; 1:        100    CL_FI_COMMODITY_CPC_CLASS Commodity    CPC_Class Fishery  Fishery</span>
<span class="co">#&gt; 2:        101 CL_FI_COMMODITY_CPC_DIVISION Commodity CPC Division Fishery  Fishery</span>
<span class="co">#&gt; 3:        102    CL_FI_COMMODITY_CPC_GROUP Commodity    CPC_Group Fishery  Fishery</span>
<span class="co">#&gt; 4:        103   CL_FI_COMMODITY_FAO_LEVEL1 Commodity   FAO_Level1 Fishery  Fishery</span>
<span class="co">#&gt; 5:        104   CL_FI_COMMODITY_FAO_LEVEL2 Commodity   FAO_Level2 Fishery  Fishery</span>
<span class="co">#&gt; 6:        105   CL_FI_COMMODITY_FAO_LEVEL3 Commodity   FAO_Level3 Fishery  Fishery</span></code></pre></div>
</div>
<div id="readebxcodelist" class="section level2">
<h2 class="hasAnchor">
<a href="#readebxcodelist" class="anchor"></a>ReadEBXCodeList()</h2>
<p>This function aimed to read code list data from EBX5 to R. As we can see,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cl_fao_level1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ReadEBXCodeList.html">ReadEBXCodeList</a></span>(<span class="dt">cl_name =</span> <span class="st">'FAO_Level1 '</span>)
cl_fao_level1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tbl_df</span>()
<span class="co">#&gt; # A tibble: 4 x 5</span>
<span class="co">#&gt;   Identifier FAO_Code NameEn                   NameFr                   NameEs                 </span>
<span class="co">#&gt;   &lt;fct&gt;      &lt;fct&gt;    &lt;fct&gt;                    &lt;fct&gt;                    &lt;fct&gt;                  </span>
<span class="co">#&gt; 1 50001      1        Fish                     Poissons                 Peces                  </span>
<span class="co">#&gt; 2 50064      2        Crustaceans              Crustacés                Crustáceos             </span>
<span class="co">#&gt; 3 50086      5        Molluscs, aquatic inver~ Mollusques, autres inve~ Moluscos y otros inver~</span>
<span class="co">#&gt; 4 50114      7        Fish, crustaceans, moll~ Poissons, crustacés, mo~ Peces, crustáceos, mol~</span></code></pre></div>
<hr>
<div class="alert alert-dismissible alert-warning">
<button type="button" class="close" data-dismiss="alert">
×
</button>
<h4 class="alert-heading">
Warning!
</h4>
<p class="mb-0">
Please, be aware that the next two functions can modify the original data. Anyway, we should have rights to do changes in the original data.
</p>
</div>
<hr>
</div>
<div id="insertebxcodelist" class="section level2">
<h2 class="hasAnchor">
<a href="#insertebxcodelist" class="anchor"></a>InsertEBXCodeList()</h2>
<p><code><a href="../reference/InsertEBXCodeList.html">InsertEBXCodeList()</a></code> and <code><a href="../reference/UpdateEBXCodeList.html">UpdateEBXCodeList()</a></code> should be used carefully, because it will change the original data stored in the EBX database. Regardless, this function only can be run by users who are rights to insert and update data in the EBX.</p>
<p>Currently, <code>faoebx5</code> has not implemmented function to remove data in the EBX, so we can do it only using the EBX user interface.</p>
<p>The <code><a href="../reference/InsertEBXCodeList.html">InsertEBXCodeList()</a></code> function requires a data frame with the new rows that will be inserted. This data frame must contain the same variables/columns of the original table. For instance, the code list <code>FAO_Level1</code> has the following columns: Identifier, FAO_Code, NameEn, NameFr, NameEs. Therefore, the new rows will contain these same columns, as we can see in the data frame <code>cl_faolevel1_new</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cl_faolevel1_new &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(
  <span class="dt">Identifier =</span> <span class="dv">99999</span>,
  <span class="dt">FAO_Code =</span> 7L,
  <span class="dt">NameEn =</span> <span class="st">"XXXX_English"</span>,
  <span class="dt">NameFr =</span> <span class="st">"XXXX_French"</span>,
  <span class="dt">NameEs =</span> <span class="st">"XXXX_Es"</span>
)
cl_faolevel1_new
<span class="co">#&gt;   Identifier FAO_Code       NameEn      NameFr  NameEs</span>
<span class="co">#&gt; 1      99999        7 XXXX_English XXXX_French XXXX_Es</span></code></pre></div>
<p>Once we have created the data frame with the new rows, the next step is to run the function <code><a href="../reference/InsertEBXCodeList.html">InsertEBXCodeList()</a></code> specificating the arguments: <code>data</code> with data frame composed by the news rows to be inserted, <code>cl_name</code> the code list name, <code>folder</code> the folder name, <code>branch</code> the branch name, and <code>instance</code> the instance name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/all">all</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(cl_faolevel1_new) <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(cl_fao_level1))
<span class="co">#&gt; [1] TRUE</span>

<span class="kw"><a href="../reference/InsertEBXCodeList.html">InsertEBXCodeList</a></span>(<span class="dt">data     =</span> cl_faolevel1_new,
                  <span class="dt">cl_name  =</span> <span class="st">'FAO_Level1'</span>,
                  <span class="dt">folder   =</span> <span class="st">'Commodity'</span>,
                  <span class="dt">branch   =</span> <span class="st">'Fishery'</span>,
                  <span class="dt">instance =</span> <span class="st">'Fishery'</span>)
<span class="co">#&gt; [1] TRUE</span>

cl_fao_level1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ReadEBXCodeList.html">ReadEBXCodeList</a></span>(<span class="dt">cl_name =</span> <span class="st">'FAO_Level1 '</span>)
cl_fao_level1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tbl_df</span>()
<span class="co">#&gt; # A tibble: 5 x 5</span>
<span class="co">#&gt;   Identifier FAO_Code NameEn                   NameFr                   NameEs                 </span>
<span class="co">#&gt;   &lt;fct&gt;      &lt;fct&gt;    &lt;fct&gt;                    &lt;fct&gt;                    &lt;fct&gt;                  </span>
<span class="co">#&gt; 1 50001      1        Fish                     Poissons                 Peces                  </span>
<span class="co">#&gt; 2 50064      2        Crustaceans              Crustacés                Crustáceos             </span>
<span class="co">#&gt; 3 50086      5        Molluscs, aquatic inver~ Mollusques, autres inve~ Moluscos y otros inver~</span>
<span class="co">#&gt; 4 50114      7        Fish, crustaceans, moll~ Poissons, crustacés, mo~ Peces, crustáceos, mol~</span>
<span class="co">#&gt; 5 99999      7        XXXX_English             XXXX_French              XXXX_Es</span></code></pre></div>
</div>
<div id="updateebxcodelist" class="section level2">
<h2 class="hasAnchor">
<a href="#updateebxcodelist" class="anchor"></a>UpdateEBXCodeList()</h2>
<p><code><a href="../reference/UpdateEBXCodeList.html">UpdateEBXCodeList()</a></code> function works similarly to <code><a href="../reference/InsertEBXCodeList.html">InsertEBXCodeList()</a></code>. Therefore, we have to create a data frame with the data that we desire to update and then specify the code list name, as well as the <code>folder</code> name, <code>branch</code> name, and the <code>instance</code> name. In this example, we just changed the data stored in the column <code>NameEs</code> from <code>XXXX_Es</code> to <code>Name spanish</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cl_update &lt;-<span class="st"> </span>cl_faolevel1_new
cl_update &lt;-<span class="st"> </span>cl_update <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">NameEs =</span> <span class="st">'Name spanish'</span>)

<span class="kw"><a href="../reference/UpdateEBXCodeList.html">UpdateEBXCodeList</a></span>(<span class="dt">data =</span> cl_update,
                  <span class="dt">cl_name  =</span> <span class="st">'FAO_Level1'</span>,
                  <span class="dt">folder   =</span> <span class="st">'Commodity'</span>,
                  <span class="dt">branch   =</span> <span class="st">'Fishery'</span>,
                  <span class="dt">instance =</span> <span class="st">'Fishery'</span>)
<span class="co">#&gt; [1] TRUE</span>

cl_fao_level1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ReadEBXCodeList.html">ReadEBXCodeList</a></span>(<span class="dt">cl_name =</span> <span class="st">'FAO_Level1 '</span>)
cl_fao_level1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tbl_df</span>()
<span class="co">#&gt; # A tibble: 5 x 5</span>
<span class="co">#&gt;   Identifier FAO_Code NameEn                   NameFr                   NameEs                 </span>
<span class="co">#&gt;   &lt;fct&gt;      &lt;fct&gt;    &lt;fct&gt;                    &lt;fct&gt;                    &lt;fct&gt;                  </span>
<span class="co">#&gt; 1 50001      1        Fish                     Poissons                 Peces                  </span>
<span class="co">#&gt; 2 50064      2        Crustaceans              Crustacés                Crustáceos             </span>
<span class="co">#&gt; 3 50086      5        Molluscs, aquatic inver~ Mollusques, autres inve~ Moluscos y otros inver~</span>
<span class="co">#&gt; 4 50114      7        Fish, crustaceans, moll~ Poissons, crustacés, mo~ Peces, crustáceos, mol~</span>
<span class="co">#&gt; 5 99999      7        XXXX_English             XXXX_French              Name spanish</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#getebxcodelists">GetEBXCodeLists()</a></li>
      <li><a href="#readebxcodelist">ReadEBXCodeList()</a></li>
      <li><a href="#insertebxcodelist">InsertEBXCodeList()</a></li>
      <li><a href="#updateebxcodelist">UpdateEBXCodeList()</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://lgsilvaesilva.github.io">Luis G. Silva e Silva</a>, Thomas Berger.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
